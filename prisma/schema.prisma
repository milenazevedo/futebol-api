// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Time {
  id         Int      @id @default(autoincrement())
  nome       String
  fundacao   DateTime?
  jogadores  Jogador[]
  partidasM  Partida[] @relation("Mandante")
  partidasV  Partida[] @relation("Visitante")
  escalacoes Escalacao[]
}

model Jogador {
  id         Int      @id @default(autoincrement())
  nome       String
  posicao    String
  subposicao String?  // Campo opcional para subposição
  numero     Int
  timeId     Int
  time       Time     @relation(fields: [timeId], references: [id])
  escalacoes Escalacao[]
}

model Partida {
  id         Int       @id @default(autoincrement())
  data       DateTime
  local      String
  mandanteId Int
  visitanteId Int
  mandante   Time      @relation("Mandante", fields: [mandanteId], references: [id])
  visitante  Time      @relation("Visitante", fields: [visitanteId], references: [id])
  escalacoes Escalacao[]
}

model Escalacao {
  id       Int      @id @default(autoincrement())
  jogadorId Int
  partidaId Int
  timeId    Int
  jogador   Jogador   @relation(fields: [jogadorId], references: [id])
  partida   Partida   @relation(fields: [partidaId], references: [id])
  time      Time      @relation(fields: [timeId], references: [id])
}

model Usuario {
  id        Int     @id @default(autoincrement())
  email     String  @unique
  senha     String  // bcrypt hashed password
  nome      String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}


